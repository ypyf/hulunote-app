# Rust/UI Guide

This project uses **Rust/UI** (https://www.rust-ui.com/) for UI components.

Rust/UI is **not** a traditional "install-a-component-library" approach.
Instead, it provides a CLI and a component schema to **generate and distribute component code into your repo**.

## What was added to this repo

- `src/components/ui/` — generated UI components (Button, Input, Card, etc.)
- `src/components/mod.rs` — module entrypoint for components
- `ui_config.toml` — Rust/UI configuration generated by `ui init`
- `style/tailwind.css` — Tailwind entry file used by both Trunk and Rust/UI
- `package.json` + `pnpm-lock.yaml` — Tailwind dependencies for Rust/UI (and animations)

> Note: `node_modules/` is intentionally ignored by git.

## Source layout (app modules)

- `src/lib.rs` — entrypoint; mounts `App` and hosts tests
- `src/app/` — App component + routing
- `src/state/` — `AppState` + context wiring
- `src/api/` — `ApiClient` + request/response models
- `src/models/` — core data models (Database, Note, Nav, AccountInfo, etc.)
- `src/pages/` — page components (Login, Registration, Home, Note, Search, Settings, etc.)
- `src/editor/` — outline editor + helpers
- `src/wiki/` — wiki link parsing helpers
- `src/storage/` — localStorage helpers + recents
- `src/util/` — time/date helpers

## CLI installation

```bash
cargo install ui-cli --force
```

## Initialize Rust/UI in an existing project

Run from the repo root:

```bash
ui init
```

This will add minimal dependencies and project files needed by Rust/UI.

## Add components

```bash
ui add button input card label alert spinner
```

This writes component source code under `src/components/ui/`.

## Where to use components

Import from `crate::components::ui` (or directly from `crate::components::ui::<component>`).

Example:

```rust
use crate::components::ui::{Button, Card, CardContent, CardHeader, CardTitle, Input, Label};
```

## Compatibility notes (Leptos/Trunk)

Rust/UI generates **source code** into your repository. It is not a precompiled component library,
so compatibility depends on your current framework versions and build targets.

Recommendations:

- Treat generated components as **owned code**: review and adjust when needed.
- Ensure CI checks match what Trunk does (WASM target build):

```bash
cargo build --target wasm32-unknown-unknown
trunk build
```

- Some patterns are more fragile across Leptos versions (e.g., `bind:value`).
  If you hit CI failures, prefer stable, explicit wiring for inputs:
  `value=move || signal.get()` + `on:input` handler updating the signal.

## Theme tokens (important)

Rust/UI generated components may rely on `--color-*` tokens (shadcn-style variable names).
This repo keeps a canonical token map in:

- `style/tailwind.css` (defines the palette + `--color-*` aliases)
- `tailwind.config.js` (Tailwind colors reference `--color-*`)

Rule:
- Prefer updating tokens in `style/tailwind.css` to fix styling.
- Avoid editing generated component internals for colors unless absolutely necessary.

## Tailwind integration

Trunk compiles Tailwind via `index.html`:

```html
<link data-trunk rel="tailwind-css" href="style/tailwind.css" />
```

The Tailwind entry file is `style/tailwind.css`.
